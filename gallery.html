<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="styles/nav.css">
    <link rel="stylesheet" href="styles/offers.css">
    <link rel="stylesheet" href="styles/grid-gallery.css">
    <link rel="stylesheet" href="styles/jak-powstaje.css">
    <link rel="stylesheet" href="styles/home.css">
    <link rel="stylesheet" href="styles/gallery.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fotorama CSS from CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <link rel="stylesheet" href="styles/bootsrap-overrides.css">
    <script id="galleries" type="application/json">
    {
        "testowa": {
            "name": "Testowa",
            "description": "Testowa galeria",
            "location": "Testowa lokalizacja",
            "images": [
                {
                    "title": "wiosna",
                    "description": "próbny opis",
                    "img": "KOTKI.jpg"
                },
                {
                    "title": "lato",
                    "description": "próbny opis",
                    "img": "testowo2.jpg"
                },
                {
                    "title": "jesien",
                    "description": "próbny opis jesieni",
                    "img": "testowo1.jpg"
                }
            ]
        },
        "testowa2": {
            "name": "Testowa",
            "description": "Testowa galeria",
            "location": "Testowa lokalizacja",
            "images": [
                {
                    "title": "wiosna",
                    "description": "próbny opis",
                    "img": "testowo.jpg"
                },
                {
                    "title": "lato",
                    "description": "próbny opis",
                    "img": "testowo2.jpg"
                },
                {
                    "title": "jesien",
                    "description": "próbny opis jesieni",
                    "img": "testowo1.jpg"
                }
            ]
        }
    }
    </script>
</head>

<body class="main-font">
    <div class="background-wrapper">
        <nav class="navbar scrolled navbar-expand-lg fixed-top">
            <div class="navbar-border full-height full-width navbar">
                <div class="container">
                    <div class="navbar-brand" href="#">
                        <img class="logo" src="resources/img/ogrodniklogo.svg">
                        <h class="text-primary">ogrodnik projektuje</h>
                    </div>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="/">home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/#uslugi">oferta</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/#portfolio">portfolio</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/#kontakt">kontakt</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        <div class="container topmost landing-page padding-from-gutter">
            <div class="row h-100">
                <div class="col-sm-8 container h-100">
                    <div class="row gallery-row padding-from-gutter">
                        <div id="gallery-carousel" class="flickity-carousel h-100">
                        </div>
                    </div>
                    <div class="row thumbnail-row">
                        <div id="thumbnail-carousel" class="flickity-carousel h-100">
                        </div>
                    </div>
                </div>
                <div class="col-sm-4" style="background-color: pink;">
                    <span id="name-label"></span>
                    <span id="location-label"></span>
                    <span id="description-label"></span>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap JS and dependencies from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <!-- Fotorama JS from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fotorama/4.6.4/fotorama.min.js"></script>
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <script>
        // Function to get URL parameters
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
    
        // Get the 'gallery' parameter from the URL
        const galleryName = getQueryParam('gallery');
    
        if (galleryName) {
            // Parse the embedded JSON data from the <script> tag in the <head>
            const galleryData = JSON.parse(document.getElementById('galleries').textContent);
    
            // Check if the gallery exists in the JSON data
            if (galleryData[galleryName]) {
                const data = galleryData[galleryName];

                document.getElementById('name-label').innerText = data.name;
                document.getElementById('description-label').innerText = data.description;
                document.getElementById('location-label').innerText = data.location;

                var galleryCells = data.images.map(image => {
                    const galleryCell = document.createElement('div');
                    galleryCell.className = 'carousel-cell';
                    galleryCell.style.height = '100%';
                    galleryCell.style.width = 'fit-content';
                    const galleryImg = document.createElement('img');
                    //galleryImg.className = 'object-fit-cover';
                    galleryImg.src = "resources/img/" + image.img;
                    galleryImg.alt = image.title || 'Gallery Image';
                    galleryCell.appendChild(galleryImg);

                    return galleryCell;
                });

                $('#gallery-carousel').append(...galleryCells);

                var thumbnailCells = data.images.map(image => {
                    const thumbnailCell = document.createElement('div');
                    thumbnailCell.className = 'carousel-cell h-100';
                    const thumbnailImg = document.createElement('img');
                    thumbnailImg.className = 'object-fit-cover';
                    thumbnailImg.src = "resources/img/" + image.img;
                    thumbnailImg.alt = image.title || 'Thumbnail Image';
                    thumbnailCell.appendChild(thumbnailImg);

                    return thumbnailCell;
                });

                $('#thumbnail-carousel').append(...thumbnailCells);
            } else {
                console.error(`Gallery "${galleryName}" not found in the embedded JSON data.`);
            }
        } else {
            console.error('No gallery parameter provided in the URL.');
        }
    </script>
    <script>
            var $galleryCarousel = $('#gallery-carousel').flickity({
                imagesLoaded: true,
                setGallerySize: false,
                percentPosition: false,
                contain: true,
                asNavFor: '#thumbnail-carousel',
                pageDots: false,
                on: {
                    change: function (index) {
                        console.log('Slide changed to' + index);
                    }
                }
            });
    
            var $thumbnailCarousel = $('#thumbnail-carousel').flickity({
                //imagesLoaded: true,
                setGallerySize: false,
                contain: true,
                pageDots: false,
                prevNextButtons: false,
                asNavFor: '#gallery-carousel',
                on: {
                    change: function (index) {
                        console.log('Slide changed to' + index);
                    }
                }
            });
    </script>
</body>

</html>
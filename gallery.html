<!DOCTYPE html>
<html>

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DBM0FEFTDV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-DBM0FEFTDV');
    </script>
    <link rel="icon" type="image/x-icon" href="/resources/img/ogrodniklogo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <link rel="stylesheet" href="styles/bootsrap-overrides.css">
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="styles/nav.css">
    <link rel="stylesheet" href="styles/offers.css">
    <link rel="stylesheet" href="styles/grid-gallery.css">
    <link rel="stylesheet" href="styles/jak-powstaje.css">
    <link rel="stylesheet" href="styles/home.css">
    <link rel="stylesheet" href="styles/gallery.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
    <script id="galleries" type="application/json">
    {
        "skalny": {
            "name": "ogród skalny",
            "subtitle": "stylizowany na japoński",
            "description": "Oto jak stworzyć piękny, japoński ogród w swojej przestrzeni mieszkalnej! Oczywiście, nie trzeba przesadzać z stylizacją, aby uzyskać wspaniały efekt. Możesz dodać kilka elementów, które nawiązują do japońskiej kultury, takich jak żwirowa ścieżka wspinająca się pod górę lub naturalne ułożenie głazów na skarpie. Nie zapomnij również o roślinach, które występują w stanie naturalnym w Azji i dobrze radzą sobie w naszym klimacie, takich jak klon japoński, magnolie, sosny i azalie. I na koniec, dodaj prostą, drewnianą ławkę, aby w pełni cieszyć się lekkością orientalnej estetyki.",
            "short-description": "Japoński ogród z naturalnymi głazami i orientalnymi roślinami. Prosty, lekki, inspirowany Azją.",
            "location": "okolice Andrychowa",
            "date": "2023",
            "images": [
                {
                    "img": "portfolio/SKALNY/5.jpg"
                },
                {
                    "img": "portfolio/SKALNY/1.jpg"
                },
                {
                    "img": "portfolio/SKALNY/2.jpg"
                },
                {
                    "img": "portfolio/SKALNY/PICT0107a.jpg"
                },
                {
                    "img": "portfolio/SKALNY/PICT0115a.jpg"
                },
                {
                    "img": "portfolio/SKALNY/PICT0139.jpg"
                },
                {
                    "img": "portfolio/SKALNY/PICT0139A.jpg"
                },
                {
                    "img": "portfolio/SKALNY/a.jpg"
                }
            ]
        },
        "romantyczny": {
            "name": "Romantyczny ogród kwiatowy",
            "description": "W ogrodach kwiatowych dominują byliny i różne odmiany róż. Osnową kompozycji są formowane cisy i miniaturowe iglaki np. świerk Conica oraz zimozielone bukszpany. Wypełnienie rabat tworzą następujące byliny: floksy, odętki, żurawki, fuksje, galilardie i astry, krzewy kwitnące: dziurawiec kielichowy, hortensje bukietowe.Lawenda, kocimiętka, macierzanka i jeżówka wabią pszczoły i inne owady. Aby przyciągnąć motyle do ogrodu kwiatowego, warto posadzić Budleję Dawida, rudbekię, szałwię, firletkę i miętę. Możesz cieszyć się widokiem kolorowych motyli cały dzień.",
            "short-description": "Kolorowy ogród pełen bylin i róż. Przyciąga motyle i zachwyca kwiatami przez cały dzień.",
            "location": "Kraków, Polska",
            "date": "2022",
            "thumbnailImage": {
                "img": "portfolio/ROMANTYCZNY/PICT0290a.jpg"
            },
            "images": [
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0290a.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0293.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0297.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0308.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0328.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0256a.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0153.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/PICT0083.jpg"
                },
                {
                    "img": "portfolio/ROMANTYCZNY/motyl.jpg"
                }
            ]
        },
        "miejska": {
            "name": "Zieleń miejska",
            "description": "Projekty zieleni miejskiej łączą funkcjonalność z estetyką, tworząc przyjazne przestrzenie w tkance miejskiej. Wykorzystujemy rośliny odporne na trudne warunki miejskie, które jednocześnie poprawiają jakość powietrza i tworzą przyjemne miejsca do odpoczynku. Nasze realizacje obejmują skwery, parki kieszonkowe oraz zieleń przyuliczną, które wprowadzają naturę do przestrzeni zurbanizowanej.",
            "short-description": "Zieleń w mieście – funkcjonalna, estetyczna, odporna na warunki. Tworzy przyjazne miejsca do odpoczynku.",
            "location": "Małopolska",
            "date": "2023",
            "thumbnailImage": {
                "img": "portfolio/MIEJSKA/DSCF0804.jpg"
            },
            "images": [
                {
                    "img": "portfolio/MIEJSKA/DSCF0804.jpg"
                },
                {
                    "img": "portfolio/MIEJSKA/1.jpg"
                },
                {
                    "img": "portfolio/MIEJSKA/2.jpg"
                },
                {
                    "img": "portfolio/MIEJSKA/DSCF0851.jpg"
                },
                {
                    "img": "portfolio/MIEJSKA/DSCF4641.jpg"
                },
                {
                    "img": "portfolio/MIEJSKA/DSCF4793.jpg"
                },
                {
                    "img": "portfolio/MIEJSKA/IMG_3107.jpg"
                }
            ]
        },
        "willowy": {
            "name": "Ogród willowy",
            "description": "W ogrodzie willowym, willa i ogród w stylu eklektycznym w swobodny sposób łączą elementy różnych stylów architektonicznych. Nowoczesny minimalizm widoczny w prostej drewnianej konstrukcji ogrodowej kuchni zewnętrznej ze stylem rzymskich ogrodów willowych zapisanym w rozległej bryle domu i altany w dolnej części ogrodu. Altana jest podparta kolumnami w stylu doryckim i ma zielony dach z bluszczem pospolitym. Duże rośliny równoważą ciężkie elementy architektury, a zieleń jest dominującym kolorem, podkreślając minimalistyczny design ogrodu.",
            "short-description": "Eklektyczny ogród willowy z zielonym dachem i dużymi roślinami. Minimalizm spotyka klasykę.",
            "location": "okolice Krakowa",
            "date": "2023",
            "thumbnailImage": {
                "img": "portfolio/WILLOWY/IMG_0014.jpg"
            },
            "images": [
                {
                    "img": "portfolio/WILLOWY/IMG_0014.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/Img_0002a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0005a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0006a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0009a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0003.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0018a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0019a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0020a.jpg"
                },
                {
                    "img": "portfolio/WILLOWY/IMG_0029.jpg"
                }
            ]
        },
        "nawsi": {
            "name": "Duży ogród na wsi",
            "description": "Ten piękny ogród wpisuje się idealnie w krajobraz dzięki dużej powierzchni trawników, które podkreślają przestrzeń. Teren jest delikatnie ukształtowany i tworzy naturalne wzniesienia. Barwne byliny dodają uroku i zapewniają sielską atmosferę. Otoczenie drzew stanowią gatunki krajowe takie jak dąb szypułkowy, klon pospolity czy jarząb pospolity, a także ozdobne odmiany, które zdobią ogród przez cały rok. W pobliskim lesie można znaleźć swojskie buki, graby, jarząby i czeremchy. Na horyzoncie widać pasmo Beskidu Małego, które harmonijnie wpisuje się w krajobraz i łączy się z bryłą budynku.",
            "short-description": "Sielski ogród z dużymi trawnikami i barwnymi bylinami. Wpisuje się w naturalny krajobraz Beskidów.",
            "location": "Beskid Mały",
            "date": "2023",
            "thumbnailImage": {
                "img": "portfolio/NAWSI/1na czoło.jpg"
            },
            "images": [
                {
                    "img": "portfolio/NAWSI/1na czoło.jpg"
                },
                {
                    "img": "portfolio/NAWSI/2 na czoło.jpg"
                },
                {
                    "img": "portfolio/NAWSI/A.jpg"
                },
                {
                    "img": "portfolio/NAWSI/IMG_0051.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0008.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0019a.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0035a.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0171a.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0189.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0197a.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0257A.jpg"
                },
                {
                    "img": "portfolio/NAWSI/PICT0263.jpg"
                }
            ]
        },
        "zabytkowy": {
            "name": "Park zabytkowy",
            "description": "W XIX wieku pojawił się styl ogrodowy - historyzm, który naśladował dawne ogrody barokowe. Współczesne rewitalizacje zieleni parkowej opierają się na odwzorowaniu dawnych stylów. Ogrody barokowe składają się z gazonowych i rabatowych partii, otoczonych niskimi, przystrzyżonymi żywopłotami. Wypełnienie parterów kwiatowych stanowią róża Ballerina i miniatura The Fairy połączone z Berberysem Thunberga. Partery gazonowe to przystrzyżone trawniki. Rzędy lipy drobnolistnej zwane boskietami otaczają ogród parterowy. Drzewa przycina się z boków, aby uzyskać zielone ściany i ciekawe perspektywy. Efekt ten uzyskuje się po kilkunastu latach.",
            "short-description": "Historyczny park w stylu barokowym. Gazonowe rabaty, róże i zielone ściany tworzą klasyczną elegancję.",
            "location": "Małopolska",
            "date": "2023",
            "thumbnailImage": {
                "img": "portfolio/ZABYTKOWY/2.jpg"
            },
            "images": [
                {
                    "img": "portfolio/ZABYTKOWY/2.jpg"
                },
                {
                    "img": "portfolio/ZABYTKOWY/1.jpg"
                },
                {
                    "img": "portfolio/ZABYTKOWY/3.jpg"
                },
                {
                    "img": "portfolio/ZABYTKOWY/4.jpg"
                },
                {
                    "img": "portfolio/ZABYTKOWY/IMG_0021a.jpg"
                },
                {
                    "img": "portfolio/ZABYTKOWY/IMG_0024a.jpg"
                }
            ]
        },
        "dworek": {
            "name": "Naturalistyczny parkowy",
            "description": "Dworek stoi na wysokiej skarpie i ma bogatą sztukaterię okienną oraz jasną pastelową elewację. Mury z wapienia z Płazy niwelują spadek terenu po stronie ogrodu. Wybór gatunków roślin koncentruje się na drzewach i krzewach posadzonych w grupach, co ułatwia ich pielęgnację. Kompozycja ogranicza się do zieleni i bieli w wielu odcieniach, a w pobliżu domu pozostawiono starodrzew. Brzozy brodawkowate prezentują się pięknie na tle wapiennego muru, a subtelna aranżacja zieleni podkreśla elegancki styl dworku.",
            "short-description": "Dworek na skarpie z pastelową elewacją i starodrzewem. Naturalistyczna kompozycja w zieleni i bieli.",
            "location": "Małopolska",
            "date": "2023",
            "thumbnailImage": {
                "img": "portfolio/DWOREK/thumbnail.jpg"
            },
            "images": [
                {
                    "img": "portfolio/DWOREK/thumbnail.jpg"
                },
                {
                    "img": "portfolio/DWOREK/20200219_141125.jpg"
                },
                {
                    "img": "portfolio/DWOREK/20230330_135821 (1).jpg"
                },
                {
                    "img": "portfolio/DWOREK/20230330_135825 (2).jpg"
                },
                {
                    "img": "portfolio/DWOREK/20230330_135852 (2).jpg"
                },
                {
                    "img": "portfolio/DWOREK/20230330_140003.jpg"
                },
                {
                    "img": "portfolio/DWOREK/20230330_140025.jpg"
                },
                {
                    "img": "portfolio/DWOREK/IMG-20200710-WA0008.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0002.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0009.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0015.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0020.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0061.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0091.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0094.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0097.jpg"
                },
                {
                    "img": "portfolio/DWOREK/PICT0098.jpg"
                }
            ]
        }
    }
    </script>
</head>

<body class="main-font gallery-root full-screen">
    <div class="background-wrapper shutter h-100">
        <nav class="navbar navbar-expand-lg fixed-top nav-shadow">
            <div class="navbar-border h-100 w-100 ms-2 me-2 ms-md-3 me-md-3 ps-md-5 pe-md-5">
                <div class="navbar-brand h-100 d-flex" href="#">
                    <img class="h-100 logo" src="resources/img/ogrodniklogo.svg">
                    <h class="text-primary ms-2 logo-font">ogrodnik projektuje</h>
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link text-primary" href="/">home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-primary" href="/#uslugi">oferta</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-primary" href="/#portfolio">portfolio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-primary" href="/#kontakt">kontakt</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container topmost landing-page gallery-section h-100">
            <div class="row h-100">
                <div class="col-12 col-md-8 gallery-content-container padding-from-gutter">
                    <div class="row gallery-row h-100">
                        <div id="gallery-carousel" class="flickity-carousel h-100 w-100">
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4 ps-md-0 gallery-description-container padding-from-gutter">
                    <div class="row mt-2 mt-md-4 h-100">
                        <div class="col-12 flex-grow-1 d-flex flex-column" > 
                            <div class="flex-grow-1 text-primary">
                                <h5 id="name-label" class="fw-bold"></h5>
                                <p class="mb-1">
                                    <span id="location-label"></span>,
                                    <span id="date-label" class="text-muted"></span>
                                </p>
                                <p id="description-label" class="mb-3 d-none d-sm-inline d-landscape-none"></p>
                                <p id="short-description-label" class="mb-3 d-inline d-sm-none d-landscape-inline"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="gallery-thumbnail-container col-12 padding-from-gutter d-none d-md-block">
                    <div class="row thumbnail-container h-100">
                        <div id="thumbnail-carousel" class="flickity-carousel h-100">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Get the 'gallery' parameter from the URL
        const galleryName = getQueryParam('gallery');
        const initialIndex = parseInt(getQueryParam('index') ?? "0");
        const galleryData = JSON.parse(document.getElementById('galleries').textContent);
        const galleryKeys = Object.keys(galleryData);

        // Function to get URL parameters
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        function createGalleryCell(imageData, subIndex, key) {
            const galleryCell = document.createElement('div');
            galleryCell.className = 'carousel-cell';
            galleryCell.style.height = '100%';
            
            // Add data attributes using dataset
            galleryCell.dataset.subindex = subIndex;
            galleryCell.dataset.key = key;
            
            const galleryImg = document.createElement('img');
            // Use data-flickity-lazyload instead of src for lazy loading
            galleryImg.setAttribute('data-flickity-lazyload', "resources/img/" + imageData.img);
            galleryImg.alt = imageData.title || 'Gallery Image';
            galleryImg.style.width = 'auto';
            galleryImg.style.height = '100%';
            galleryImg.style.display = 'block';
            galleryCell.appendChild(galleryImg);

            return galleryCell;
        }

        function loadGallery(galleryName) {
            data = galleryData[galleryName];
            galleryIndex = Object.keys(galleryData).indexOf(galleryName);

            document.getElementById('name-label').innerText = data.name;
            document.getElementById('location-label').innerText = data.location;
            document.getElementById('date-label').innerText = data.date;

            var galleryCells = data.images.map((image, index) => createGalleryCell(image, index, galleryName));

            $('#gallery-carousel').append(...galleryCells);
        }


        function createThumbnailCell(gallery, galleryKey) {
            var imageData = gallery.thumbnailImage || gallery.images[0];

            const thumbCell = document.createElement('div');
            thumbCell.className = 'carousel-cell';
            thumbCell.style.height = '100%';
            thumbCell.style.width = 'fit-content';
            
            // Add data attributes for thumbnail cells too
            thumbCell.dataset.key = galleryKey;
            thumbCell.dataset.subindex = 0; // thumbnails represent the first image of each gallery

            const thumbImg = document.createElement('img');
            thumbImg.src = "resources/img/" + imageData.img;
            thumbImg.alt = imageData.title || 'Thumbnail Image';
            thumbImg.style.height = "100%";
            thumbImg.style.width = "100%";
            thumbImg.style.objectFit = "cover";
            thumbImg.style.display = "block";

            // Optional: add title/description overlay or tooltip
            thumbCell.title = imageData.title + " – " + (imageData.description || '');

            thumbCell.appendChild(thumbImg);

            // Add click handler to navigate to gallery
            thumbCell.addEventListener('click', function() {
                // Find the starting index of this gallery in the main carousel
                var startIndex = 0;
                for (let i = 0; i < galleryKeys.indexOf(galleryKey); i++) {
                    startIndex += galleryData[galleryKeys[i]].images.length;
                }
                
                // Navigate to the first image of the selected gallery
                $galleryCarousel.flickity('select', startIndex);
            });

            return thumbCell;
        }

        function updateGalleryTitle(gallery){
            document.getElementById('name-label').innerText = gallery.name;
            document.getElementById('location-label').innerText = gallery.location;
            document.getElementById('date-label').innerText = gallery.date;
        }

        function updateGalleryDescription(gallery, index){
            var imageObject = gallery.images[index];

            var descriptionLabelElement = document.getElementById('description-label');

            if(imageObject.description) {
                descriptionLabelElement.innerText = imageObject.description;
            } else{
                descriptionLabelElement.innerText = gallery.description;
            }

            var shortDescriptionLabelElement = document.getElementById('short-description-label');
            if(imageObject["short-description"]) {
                shortDescriptionLabelElement.innerText = imageObject["short-description"];
            } else{
                shortDescriptionLabelElement.innerText = gallery["short-description"];
            }
        }

        function updateUrl(galleryKey, index) {
            const newUrl = '?gallery=' + galleryKey + '&index=' + index;
            history.pushState({}, '', newUrl);
        }

        var thumbnailCells = galleryKeys.map((key, index) => {
            return createThumbnailCell(galleryData[key], key)
        });


        const thumbnailCarousel = document.getElementById('thumbnail-carousel');

        thumbnailCarousel.append(...thumbnailCells);

        galleryKeys.forEach(key => {
            loadGallery(key);
        })

        var currentGallery = galleryData[galleryName] || galleryData[galleryKeys[0]];

        updateGalleryDescription(currentGallery, initialIndex);
        updateGalleryTitle(currentGallery);

    </script>
    <script>
            // Find the starting index of this gallery in the main carousel
            var absoluteInitialIndex = 0;
            var thumbnailInitialIndex = 0;
            for (let i = 0; i < galleryKeys.indexOf(galleryName); i++) {
                absoluteInitialIndex += galleryData[galleryKeys[i]].images.length;
                thumbnailInitialIndex += 1;
            }

            var $galleryCarousel = $('#gallery-carousel').flickity({
                //imagesLoaded: true,
                imagesLoaded: false,
                setGallerySize: true,
                cellAlign: 'center',
                percentPosition: false,
                contain: true,
                initialIndex: absoluteInitialIndex + initialIndex,
                pageDots: false,
                lazyLoad: 2,
                on: {
                    change: function (index) {
                        var currentSlide = this.selectedElement;

                        if(!currentSlide) {
                            console.warn('No current slide found');
                            return;
                        }

                        var key = currentSlide.dataset.key;
                        var subIndex = currentSlide.dataset.subindex;
                        console.log('Current slide - Key:', key, 'SubIndex:', subIndex, "Index", index);

                        var subGallery = galleryData[key];

                        updateGalleryTitle(subGallery);
                        updateGalleryDescription(subGallery, subIndex);
                        updateUrl(key, subIndex);
                    }
                }
            });


            //on thumbnail carousel visible event - initialize flickity
            
    
            var $thumbnailCarousel = $('#thumbnail-carousel').flickity({
                imagesLoaded: true,
                contain: true,
                pageDots: false,
                initialIndex: thumbnailInitialIndex,
                prevNextButtons: false,
                cellAlign: 'center'
            });
    </script>
</body>

</html>